<div class="login-container">
  <div class="login-card">
    <div class="back-button" (click)="navigateBack()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="#34437A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Back
    </div>

    <img src="assets/logos/skillmuni-login-logo.png" alt="Skillmuni Logo" class="login-logo" />

    <h2 class="login-title">Create New Password</h2>
    <p class="login-subtitle">
      Your new password must be different from previous used passwords.
    </p>

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <div class="label-row">
          <label>New Password</label>
          <span *ngIf="password?.touched && password?.invalid" class="error-text">
            {{ getPasswordErrors() }}
          </span>
        </div>
        <div class="password-input-container">
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            formControlName="password" 
            class="form-input" 
            placeholder="Enter new password"
            [class.error]="password?.touched && password?.invalid">
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility('password')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#34437A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#34437A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="form-group">
        <div class="label-row">
          <label>Confirm New Password</label>
          <span *ngIf="confirmPassword?.touched && (confirmPassword?.invalid || passwordForm.hasError('mismatch'))" class="error-text">
            {{ confirmPassword?.hasError('required') ? 'Please confirm your password' : 'Passwords do not match' }}
          </span>
        </div>
        <div class="password-input-container">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'" 
            formControlName="confirmPassword" 
            class="form-input" 
            placeholder="Confirm new password"
            [class.error]="confirmPassword?.touched && (confirmPassword?.invalid || passwordForm.hasError('mismatch'))">
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility('confirmPassword')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#34437A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#34437A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <button type="submit" class="login-btn" [disabled]="passwordForm.invalid">
        Reset Password <span class="submit-icon">&#10132;</span>
      </button>
    </form>


  </div>
</div>
